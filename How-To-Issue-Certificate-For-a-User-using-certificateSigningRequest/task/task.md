Task details
Generate a PKI private key and CSR and name it as learner.key and learner.csr
╰─ openssl genrsa -out learner.key 2048
openssl req -new -key learner.key -out learner.csr -subj "/CN=learner"

Create a CertificateSigningRequest for learner and set the expiration date to 1 week
csr.yaml
apiVersion: certificates.k8s.io/v1
kind: CertificateSigningRequest
metadata:
name: learner
spec:
request: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURSBSRVFVRVNULS0tLS0KTUlJQ1Z6Q0NBVDhDQVFBd0VqRVFNQTRHQTFVRUF3d0hiR1ZoY201bGNqQ0NBU0l3RFFZSktvWklodmNOQVFFQgpCUUFEZ2dFUEFEQ0NBUW9DZ2dFQkFKL3hpbHRVR1RFc3ZlbkNIM0txUytkekptV0tsdE0xZzVCV1F0bGo0RzI5CnQvVWU3TVFSSTBCa2J0blNMTmlWSXBNUzNmeVk5V2hYTTFMTXQ0eDJlK3ZnTVhXRWxjb2VjcWJFdDlpNlR6VkkKYzVkeDUzeEk2NWtrM0ZsaWMrMkpNdmN0WUZMRVZxc2Y3MGk5RlpkVDJZWm9Ib1pWU3N2NGwrdjE1U3JYN1lOcgp1YWxlTkJlQ0t4M21zdHZKeHZzWVg4NXNIVTFpNThwdjJnajQvZUFVelJtT3lxeXM1ZVl6T3JhRWo3ckRQYUFSClFHSWkxc1RoUHUxUS9ER21STmpuTmhEQWNjOG1HKzBlcWxVMVowOXZxV3QwL2R2c0N0WlowcGROK2tvRHBvYXAKemlTTHh1RE9zTjN3SzRzek9wNFdaQlpIelczdjFHYnUzQVNhUUVMQzA4c0NBd0VBQWFBQU1BMEdDU3FHU0liMwpEUUVCQ3dVQUE0SUJBUUIzUyt4emxJb0NFNTV2TU1zTTBEVmJuSlJMeTRvbUFBbVFwVmVuM3FxSXlNMzY3RE5DCk9vcFFDNXBjVnVyQVBXTXFxQjJjY1dpUU0wclJ3aG1LNThiVHN0dTk1WmV2eU1RSzNSTll4MUpZVCsvMXk3c1kKbnBvV2ZjUG1uZWVtd1FMaWlvRDdXTWZCVFo1N2h0VW9UbWg3Q3FFSXJzcGwreGZvSzRtN3lYSFZMMzdTNFl5aQpiVG9MSUxtczlWdEJEMGlYaW5xUGdla2FXeXV0bFRFOEdRQ0FSTFJSanRPQmFEQmJVTk9EeFd1NGNVeHZsY2xJCkdZTC8vK3ZDV3RMai9nZElDYzBPMmplVVArQ0NuZDUzTjErSnJqZHBUMGdoWjRSa1lUWFgvM2ZsK1hUVlRBalQKZ2FrUVo2bFJUYlU4ODE0MHdUSjQ4SEhIc2ozN2lSaGlxU01ECi0tLS0tRU5EIENFUlRJRklDQVRFIFJFUVVFU1QtLS0tLQo=
signerName: kubernetes.io/kube-apiserver-client
expirationSeconds: 604800 # 1 week = 604800 seconds
usages:

- client auth

Make sure to use the encoded value of csr in the request field
cat learner.csr | base64 | tr -d "\n"
Approve the csr
╰─ kubectl certificate approve learner
Retrieve the certificate from the CSR
╰─ kubectl describe CertificateSigningRequest/learner
Export the issued certificate from the CertificateSigningRequest to a yaml
╰─ kubectl get csr learner -o yaml
Redirect the certificate value to learner.crt file after decoding it
╰─ kubectl get csr learner -o yaml > learner_issuedcert.yaml
echo "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMrRENDQWVDZ0F3SUJBZ0lSQU5Db3NnSysrd2ZzWkUrbm14ZXFPT2t3RFFZSktvWklodmNOQVFFTEJRQXcKRlRFVE1CRUdBMVVFQXhNS2EzVmlaWEp1WlhSbGN6QWVGdzB5TlRBeE1UVXdNVE13TlRSYUZ3MHlOVEF4TWpJdwpNVE13TlRSYU1CSXhFREFPQmdOVkJBTVRCMnhsWVhKdVpYSXdnZ0VpTUEwR0NTcUdTSWIzRFFFQkFRVUFBNElCCkR3QXdnZ0VLQW9JQkFRQ2Y4WXBiVkJreExMM3B3aDl5cWt2bmN5WmxpcGJUTllPUVZrTFpZK0J0dmJmMUh1ekUKRVNOQVpHN1owaXpZbFNLVEV0MzhtUFZvVnpOU3pMZU1kbnZyNERGMWhKWEtIbktteExmWXVrODFTSE9YY2VkOApTT3VaSk54WlluUHRpVEwzTFdCU3hGYXJIKzlJdlJXWFU5bUdhQjZHVlVyTCtKZnI5ZVVxMSsyRGE3bXBYalFYCmdpc2Q1ckxieWNiN0dGL09iQjFOWXVmS2I5b0krUDNnRk0wWmpzcXNyT1htTXpxMmhJKzZ3ejJnRVVCaUl0YkUKNFQ3dFVQd3hwa1RZNXpZUXdISFBKaHZ0SHFwVk5XZFBiNmxyZFAzYjdBcldXZEtYVGZwS0E2YUdxYzRraThiZwp6ckRkOEN1TE16cWVGbVFXUjgxdDc5Um03dHdFbWtCQ3d0UExBZ01CQUFHalJqQkVNQk1HQTFVZEpRUU1NQW9HCkNDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3SHdZRFZSMGpCQmd3Rm9BVXFwdnk4L244QTRxb2VKV1AKeXQ0a1U1MEJpczh3RFFZSktvWklodmNOQVFFTEJRQURnZ0VCQUpoOWt4aEpnVzBtWU5WQzVPdXQyOHAzVXQybgovTEZ4MzNkVnBwc3hnR0Y4VjNndEVRcVpwbEp6a0JQQTFSYnVOVnV6K3dUTU4wanpOeWlqV2NxeFRCdWtkcnJHCnZFRkdGL2xjV25PTGN3WnphREV4aHUrUUgrM3VRUkpEUmlSTEdicWVBeGRyWXh1WXBYOThKV0JyeVlUcCtZTEsKYm9uQWdIT3VJWnB1ZzZjck0xUE9xWDFJa3dHdkl2elNueFBFRkc3MVFCNTRtQkUyT2E5ZTBySzlQc0NjRWR4Ygp1bkNkbkpHdENDQ2MrNC8wYy9YTjVlelR5dm85R0xwQktDekFqSWZuaHl3Vm1PQ3JzU000cmdmYkRVdkdxOHI3CklKeWk0TGdkZlRiZGhsMEZRYTAyK21hRk1OU1R6anZ0Uk8vTXdxN0p4STR0YWpIcjNYWXluNUt6YTBRPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg" | base64 -d > learner.cert

Verify the steps one more time, we will use these details in the next task.

Share your learnings: As this is a sub-task, it will be better if you create the blog of day21 and day22 all together.
